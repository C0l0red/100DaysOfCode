<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Weather App</title>
    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="shortcut icon" href="/static/icons8-red-onedrive-480.png" type="image/x-icon">
    <style>
      a{
        color: initial;
        text-decoration: none;
      }
      a:hover{
        color: initial;
      }
    </style>
</head>
<body>
    <div class="container">
      {% for message in messages %}
      <div class="alert alert-danger alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
      </div>
      {% endfor %}
        <div class="row my-2">
            <form class="form col-12" action="#" method="POST" id='search-form'>{% csrf_token %}
              <div class="form-row">
                <input class="form-control col-12" type="text" placeholder="City, Country..." aria-label="Search" name="location">
              </div>
              
            </form>
        </div>
                
        <div class="row">
            <div class="col">
                <!-- Card -->
                <div class="card weather-card">

                    <!-- Card content -->
                    <div class="card-body pb-3">
                
                    <!-- Title -->
                    <div>
                      <h4 class="card-title font-weight-bold"><a href="#" class="reset">{{ result.city }}, {{ result.country }}</a>
                      <form action="#" method="get" class="float-right">
                        <div class="form-row">
                          <div class="form-group px-2">
                            <select name="hour" id="hour" class="form-control custom-select" >
                              {% for hour in result.hours %}
                              <option value="{{hour}}" {% if hour == result.current_hour %}selected{% endif %}>{{hour}}</option>
                              {% endfor %}
                            </select>
                          </div>
                          <div class="form-group">
                            <input type="submit" class="form-control" value="Go">
                          </div>
                        </div>
                        

                      </form>
                      </h4>
                    </div>
                    
                    <!-- Text -->
                    <p class="card-text">{{ result.time }}, {{ result.current_description }}</p>
                    <div class="d-flex justify-content-between">
                        <p> <span class="display-1">{{ result.current_temp }}</span><span class="display-4"><sup>&#8451;</sup></span></p>
                        <i class="weather-description"><img src="http://openweathermap.org/img/wn/{{ result.current_icon }}@2x.png" alt=""></i>
                    </div>
                    <div class="d-flex justify-content-between mb-4">
                        <p><i class="fas fa-tint fa-lg text-info pr-2"><img src="/static/icons/rainy.png" alt="" width="20"></i>{{ result.rain }}</p>
                        <p><i class="fas fa-tint fa-lg text-info pr-2"><img src="/static/icons/humidity.jpeg" alt="" width="20"></i>{{ result.humidity }}% Humid</p>
                        <p><i class="fas fa-tint fa-lg text-info pr-2"><img src="/static/icons/cloud-cover.jpeg" alt="" width="20"></i>{{ result.cloudiness }}% Cloudy</p>
                        <p><i class="fas fa-leaf fa-lg grey-text pr-2"><img src="/static/icons/leaf.png" alt="" width="20"></i>{{ result.wind }}<span class='wind-speed'>m/s</span> Winds</p>
                    </div>
                    <div class="progress md-progress">
                        <div class="progress-bar black" role="progressbar" style="width: {{ result.progress }}%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <ul class="list-unstyled d-flex justify-content-between font-small text-muted mb-4">
                        <li class="pl-4"><a href="{% url 'weather_view' %}?hour=" class="hourly">8{{result.con}}</a></li>
                        <li><a href="{% url 'weather_view'  %}?hour=" class="hourly">11{{result.con}}</a></li>
                        <li><a href="{% url 'weather_view' %}?hour=" class="hourly">2{{result.rev}}</a></li>
                        <li><a href="{% url 'weather_view' %}?hour=" class="hourly">5{{result.rev}}</a></li>
                        <li class="pr-4"><a href="{% url 'weather_view' %}?hour=" class="hourly">8{{result.rev}}</a></li>
                    </ul>
                
                    <div class="collapse-content">
                
                        <div class="collapse" id="collapseExample">
                
                        <table class="table table-borderless table-sm mb-0">
                            <tbody>
                            {% for day in result.daily %}
                            <tr>
                                <td class="font-weight-normal align-middle">{{ day.day }}</td>
                                <td class="float-right font-weight-normal">
                                <p class="mb-1">{{ day.max }}&deg;<span class="text-muted">/{{ day.min }}&deg;</span></p>
                                </td>
                                <td class="float-right mr-3 mt-0">
                                <i class="fas fa-sun fa-lg amber-text"><img src="http://openweathermap.org/img/wn/{{ day.icon }}.png" width="36" alt=""></i>
                                </td>
                            </tr>
                            {% endfor %}
                            
                            </tbody>
                        </table>
                
                        </div>
                
                        <hr class="">
                
                        <a class="btn btn-flat red-text p-1 my-1 mr-0 mml-1 deep-purple-text collapsed" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">EXPAND</a>
                
                    </div>
                
                    </div>
                
                </div>
                <!-- Card -->
            </div>
        </div>
        <div class="row" style="display: none;">
            <div class="col">
                <div class="card panels-card">
                    <div class="rounded-top grey lighten-2 dark-grey-text">
                      <ul class="list-inline float-right my-0 py-1 pr-3">
                        <li class="list-inline-item">
                          <i class="fab fa-facebook" aria-hidden="true"></i>
                        </li>
                        <li class="list-inline-item">
                          <i class="fab fa-twitter" aria-hidden="true"></i>
                        </li>
                        <li class="list-inline-item">
                          <i class="fab fa-instagram" aria-hidden="true"></i>
                        </li>
                      </ul>
                    </div>
                  
                    <!--Navbar-->
                    <nav class="navbar navbar-expand-lg navbar-dark grey lighten-5 d-flex justify-content-between z-depth-1-bottom">
                  
                        <div>
                          <ul class="list-inline my-2 py-1 dark-grey-text">
                            <li class="list-inline-item">
                              <i class="fas fa-bars" aria-hidden="true"></i>
                            </li>
                            <li class="list-inline-item font-weight-bold text-uppercase">
                              weather
                            </li>
                          </ul>
                        </div>
                  
                        <div>
                          <ul class="list-inline my-2 py-1 dark-grey-text">
                            <li class="list-inline-item">
                              <i class="fas fa-search" aria-hidden="true"></i>
                              <i class="fas fa-ellipsis-v pl-3" aria-hidden="true"></i>
                            </li>
                          </ul>
                        </div>
                  
                    </nav>
                    <!--/.Navbar-->
                  
                    <div class="card-body grey lighten-5 rounded-bottom">
                  
                      <!-- Grid row -->
                      <div class="row">
                  
                        <!-- Grid column -->
                        <div class="col-6 p-1">
                  
                          <div class="card grey lighten-2">
                            <div class="card-body pb-0">
                              <i class="fas fa-cloud fa-3x pb-4"></i>
                              <div class="d-flex justify-content-between">
                                <p class="mb-0 h5">15&deg;</p>
                                <p class="mb-0 hour">12:15 PM</p>
                              </div>
                            </div>
                            <hr>
                            <div class="card-body pt-0">
                              <h6 class="font-weight-bold mb-1">San Francisco</h6>
                              <p class="mb-0">Cloudy</p>
                            </div>
                          </div>
                  
                        </div>
                        <!-- Grid column -->
                  
                        <!-- Grid column -->
                        <div class="col-6 p-1">
                  
                          <div class="card orange lighten-3">
                            <div class="card-body pb-0">
                              <i class="fas fa-sun fa-3x pb-4"></i>
                              <div class="d-flex justify-content-between">
                                <p class="mb-0 h5">23&deg;</p>
                                <p class="mb-0 hour">3:25 PM</p>
                              </div>
                            </div>
                            <hr>
                            <div class="card-body pt-0">
                              <h6 class="font-weight-bold mb-1">New York City</h6>
                              <p class="mb-0">Sunny</p>
                            </div>
                          </div>
                  
                        </div>
                        <!-- Grid column -->
                  
                      </div>
                      <!-- Grid row -->
                  
                      <!-- Grid row -->
                      <div class="row">
                  
                        <!-- Grid column -->
                        <div class="col-6 p-1">
                  
                          <div class="card indigo lighten-3">
                            <div class="card-body pb-0">
                              <i class="fas fa-tint fa-3x pb-4"></i>
                              <div class="d-flex justify-content-between">
                                <p class="mb-0 h5">10&deg;</p>
                                <p class="mb-0 hour">10:30 AM</p>
                              </div>
                            </div>
                            <hr>
                            <div class="card-body pt-0">
                              <h6 class="font-weight-bold mb-1">Seattle</h6>
                              <p class="mb-0">Light rain</p>
                            </div>
                          </div>
                  
                        </div>
                        <!-- Grid column -->
                  
                        <!-- Grid column -->
                        <div class="col-6 p-1">
                  
                          <div class="card grey lighten-2">
                            <div class="card-body pb-0">
                              <i class="fas fa-cloud fa-3x pb-4"></i>
                              <div class="d-flex justify-content-between">
                                <p class="mb-0 h5">14&deg;</p>
                                <p class="mb-0 hour">8:10 PM</p>
                              </div>
                            </div>
                            <hr>
                            <div class="card-body pt-0">
                              <h6 class="font-weight-bold mb-1">Milwaukee</h6>
                              <p class="mb-0">Cloudy</p>
                            </div>
                          </div>
                  
                        </div>
                        <!-- Grid column -->
                  
                      </div>
                      <!-- Grid row -->
                  
                      <!-- Grid row -->
                      <div class="row">
                  
                        <!-- Grid column -->
                        <div class="col-6 p-1">
                  
                          <div class="card orange lighten-3">
                            <div class="card-body pb-0">
                              <i class="fas fa-sun fa-3x pb-4"></i>
                              <div class="d-flex justify-content-between">
                                <p class="mb-0 h5">25&deg;</p>
                                <p class="mb-0 hour">1:35 PM</p>
                              </div>
                            </div>
                            <hr>
                            <div class="card-body pt-0">
                              <h6 class="font-weight-bold mb-1">Honolulu</h6>
                              <p class="mb-0">Sunny</p>
                            </div>
                          </div>
                  
                        </div>
                        <!-- Grid column -->
                  
                        <!-- Grid column -->
                        <div class="col-6 p-1">
                  
                          <div class="card indigo white-text">
                            <div class="card-body pb-0">
                              <i class="fas fa-umbrella fa-3x pb-4"></i>
                              <div class="d-flex justify-content-between">
                                <p class="mb-0 h5">5&deg;</p>
                                <p class="mb-0 hour">7:00 AM</p>
                              </div>
                            </div>
                            <hr class="hr-light">
                            <div class="card-body pt-0">
                              <h6 class="font-weight-bold mb-1">Anchorage</h6>
                              <p class="mb-0">Heavy rain</p>
                            </div>
                          </div>
                  
                        </div>
                        <!-- Grid column -->
                  
                      </div>
                      <!-- Grid row -->
                  
                    </div>
                  
                  </div>
            </div>
        </div>
    </div>

    <!-- JS, Popper.js, and jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

    <script>
      $(function(){
        $('.hourly').each(function(){
          let url = $(this).attr('href');
          url += $(this).text();
          $(this).attr('href', url);
        })
        $('.reset').on('click', function(e){
          e.preventDefault();
          
          $('[name="location"]').val($(this).text())
          $('#search-form').submit();
        })
      })
    </script>

</body>
</html>